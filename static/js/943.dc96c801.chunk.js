"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[943],{790:function(e,t,n){n.d(t,{Z:function(){return a}});n(2791);var r=n(184);function a(e){var t=e.error;return(0,r.jsxs)("p",{children:["An error happened: ",t]})}},1943:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var r=n(5861),a=n(9439),i=n(4687),u=n.n(i),s=n(2791),c=n(7689),o=n(1686),l=n(184);function v(e){var t=e.reviewData,n=t.author,r=t.content;return(0,l.jsxs)("div",{children:[(0,l.jsxs)("b",{children:["Author: ",n]}),(0,l.jsx)("p",{children:r})]})}var d=n(7617),f=n(790),h=n(9086),p=n(2854);function g(){var e=(0,s.useState)(null),t=(0,a.Z)(e,2),n=t[0],i=t[1],g=(0,s.useState)(!1),Z=(0,a.Z)(g,2),E=Z[0],x=Z[1],w=(0,s.useState)(p.q.IDLE),y=(0,a.Z)(w,2),I=y[0],m=y[1],D=(0,s.useState)(null),b=(0,a.Z)(D,2),j=b[0],k=b[1],M=(0,c.UO)().movieId;return(0,s.useEffect)((function(){var e=new AbortController,t=function(){var t=(0,r.Z)(u().mark((function t(){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,m(p.q.PENDING),t.next=4,h.Z.fetchMovieReviewsById(M,e);case 4:0===(n=t.sent).results.length&&x(!0),i(n.results),m(p.q.RESOLVED),t.next=17;break;case 10:if(t.prev=10,t.t0=t.catch(0),"ERR_CANCELED"!==t.t0.code){t.next=14;break}return t.abrupt("return");case 14:o.Notify.failure("Fetch error. Code: ".concat(t.t0.request.status)),k(t.t0.request.status),m(p.q.REJECTED);case 17:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}();return t(),function(){e.abort()}}),[M]),(0,l.jsxs)("div",{children:[I===p.q.PENDING&&(0,l.jsx)(d.Z,{}),I===p.q.RESOLVED&&E&&(0,l.jsx)("p",{children:"We don't have any reviews for this movie."}),I===p.q.RESOLVED&&!E&&(0,l.jsx)("ul",{children:n.map((function(e){return(0,l.jsx)("li",{children:(0,l.jsx)(v,{reviewData:e})},e.id)}))}),I===p.q.REJECTED&&(0,l.jsx)(f.Z,{error:j})]})}},9086:function(e,t,n){var r=n(5861),a=n(4687),i=n.n(a),u=n(340);u.Z.defaults.baseURL="https://api.themoviedb.org/3",u.Z.defaults.headers.common.Authorization="Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI2NDdmZTU4ZWJkMjMzZDY5Y2VlN2RjYTQ2ZWYwOGFlNiIsInN1YiI6IjY0YWE4Yzk0M2UyZWM4MDEyZWUzOWM2OSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.JlMf1XMEtVXHat5MkCciJRlAPG65by9hu8CeaKn8o0o";var s=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},void 0!==t&&null!==t&&(n.signal=t.signal),e.next=4,u.Z.get("/trending/all/day",n);case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=(0,r.Z)(i().mark((function e(){var t,n,r,a,s=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",n=s.length>1?s[1]:void 0,r={},void 0!==n&&null!==n&&(r.signal=n.signal),e.next=6,u.Z.get("/search/movie?query=".concat(t),r);case 6:return a=e.sent,e.abrupt("return",a.data);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=(0,r.Z)(i().mark((function e(){var t,n,r,a,s=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",n=s.length>1?s[1]:void 0,r={},void 0!==n&&null!==n&&(r.signal=n.signal),e.next=6,u.Z.get("/movie/".concat(t),r);case 6:return a=e.sent,e.abrupt("return",a.data);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)(i().mark((function e(){var t,n,r,a,s=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",n=s.length>1?s[1]:void 0,r={},void 0!==n&&null!==n&&(r.signal=n.signal),e.next=6,u.Z.get("/movie/".concat(t,"/credits"),r);case 6:return a=e.sent,e.abrupt("return",a.data);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,r.Z)(i().mark((function e(){var t,n,r,a,s=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",n=s.length>1?s[1]:void 0,r={},void 0!==n&&null!==n&&(r.signal=n.signal),e.next=6,u.Z.get("/movie/".concat(t,"/reviews"),r);case 6:return a=e.sent,e.abrupt("return",a.data);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d={fetchMoviesTrending:s,fetchMoviesByQuery:c,fetchMovieDetailsById:o,fetchMovieCreditsById:l,fetchMovieReviewsById:v};t.Z=d},2854:function(e,t,n){n.d(t,{q:function(){return r}});var r={IDLE:"idle",PENDING:"pending",RESOLVED:"resolved",REJECTED:"rejected"}}}]);
//# sourceMappingURL=943.dc96c801.chunk.js.map